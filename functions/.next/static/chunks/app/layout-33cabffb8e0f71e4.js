(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1227:(e,t,r)=>{"use strict";r.d(t,{J:()=>i,UserProvider:()=>n});var o=r(5155),a=r(2115);let s=(0,a.createContext)(null),n=e=>{let{children:t}=e,[r,n]=(0,a.useState)(null);return(0,o.jsx)(s.Provider,{value:{user:r,setUser:n},children:t})},i=()=>{let e=(0,a.useContext)(s);if(!e)throw Error("useUser must be used within a UserProvider");return e}},2217:(e,t,r)=>{"use strict";r.d(t,{QO:()=>o,Ri:()=>a,TV:()=>s,Yj:()=>n});let o="auth",a=e=>{let t=document.cookie.match(new RegExp("(^| )".concat(e,"=([^;]+)")));if(t)return t[2]},s=(e,t,r)=>{document.cookie="".concat(e,"=").concat(t,"; path=/; ").concat(r?"domain=".concat(r,";"):""," samesite=strict;")},n=(e,t)=>{document.cookie="".concat(e,"=; path=/; ").concat(t?"domain=".concat(t,";"):""," expires=Thu, 01 Jan 1970 00:00:01 GMT;")}},2380:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});let o=(0,r(5453).v)(e=>({loadingCount:0,start:()=>e(e=>({loadingCount:e.loadingCount+1})),stop:()=>e(e=>({loadingCount:Math.max(0,e.loadingCount-1)}))}))},3036:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4147,23)),Promise.resolve().then(r.t.bind(r,8489,23)),Promise.resolve().then(r.bind(r,4241)),Promise.resolve().then(r.bind(r,3113)),Promise.resolve().then(r.bind(r,1227)),Promise.resolve().then(r.t.bind(r,6003,23)),Promise.resolve().then(r.t.bind(r,3349,23)),Promise.resolve().then(r.bind(r,9074))},3113:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>l});var o=r(5155),a=r(2115),s=r(5695),n=r(2217),i=r(8326),c=r(1227);let d=(0,a.createContext)(null),l=e=>{let{children:t}=e,{user:r,setUser:l}=(0,c.J)(),u=(0,s.useRouter)(),p=(0,s.usePathname)(),h=()=>{let e=(0,n.Ri)(n.QO);if(e)try{let t=JSON.parse(e);(0,i.Cf)(t.uid).then(e=>{e.data.length&&l({...t,id:e.data[0]._id})}).catch(e=>{(null==e?void 0:e.isAuthError)&&((0,n.Yj)(n.QO,window.location.hostname),u.push("/"))})}catch(e){console.error("Invalid auth cookie"),(0,n.Yj)(n.QO,window.location.hostname),u.push("/")}};return(0,a.useEffect)(()=>{h()},[p]),(0,o.jsx)(d.Provider,{value:{isLoggedIn:!!r,checkAuth:h},children:t})}},3349:()=>{},4241:(e,t,r)=>{"use strict";r.d(t,{ApiLoadingOverlay:()=>i});var o=r(5155),a=r(760),s=r(6413),n=r(2380);function i(){let e=(0,n.s)(e=>e.loadingCount);return(0,o.jsx)(a.N,{children:e>0&&(0,o.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed loader inset-0 z-[1000] flex items-center justify-center",children:(0,o.jsx)("div",{className:"w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin"})},"loader")})}},6003:()=>{},6903:(e,t,r)=>{"use strict";let o;r.d(t,{A:()=>d,Y:()=>i});var a=r(3464),s=r(2217);let n="https://goodpesyk-api-cv-project.duckdns.org",i="".concat(n),c=a.A.create({baseURL:n});o=r(2380).s,c.interceptors.request.use(e=>(o&&o.getState().start(),e)),c.interceptors.response.use(e=>(o&&o.getState().stop(),e),e=>(o&&o.getState().stop(),Promise.reject(e))),c.interceptors.request.use(e=>{var t;let r=null===(t=JSON.parse((0,s.Ri)(s.QO)||"{}"))||void 0===t?void 0:t.token;return r&&(e.headers.Authorization="Bearer ".concat(r)),e.isKey&&(e.headers.Authorization="c61a0c6d-1448-4302-b216-e00f980b7f23"),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>{var t;let r=null===(t=e.response)||void 0===t?void 0:t.status;return(403===r||401===r)&&(e.isAuthError=!0),Promise.reject(e)});let d=c},8326:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>a,GR:()=>n,LI:()=>i,Mu:()=>d,VV:()=>p,WU:()=>s,_2:()=>l,gN:()=>u,wq:()=>c});var o=r(6903);let a=e=>o.A.get("/users/".concat(e)),s=e=>{let t={id:e.uid,name:e.displayName||""};return o.A.post("/users",t)},n=e=>o.A.post("/cv-data",e),i=(e,t)=>o.A.put("/cv-data/".concat(e),t),c=e=>o.A.delete("/cv-data/".concat(e)),d=e=>o.A.get("/cv-data/all/".concat(e.id)),l=(e,t)=>o.A.get("/cv-data/".concat(e),{isKey:t}),u=(e,t,r)=>{let a=new FormData;return a.append("file",e),o.A.post("/cv-data/photo?isEdit=".concat(t,"&cvId=").concat(""===r?"empty":r),a,{headers:{"Content-Type":"multipart/form-data"}})},p=e=>o.A.post("/pdf/generate?url=".concat(e),null,{responseType:"blob"}).then(e=>e.data)},9074:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>n});var o=r(5155),a=r(1362),s=r(6671);let n=e=>{let{...t}=e,{theme:r="system"}=(0,a.D)();return(0,o.jsx)(s.l$,{theme:r,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[879,546,671,263,441,684,358],()=>t(3036)),_N_E=e.O()}]);