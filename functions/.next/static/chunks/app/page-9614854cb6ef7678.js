(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>o,r:()=>l});var r=a(5155);a(2115);var s=a(9708),n=a(2085),i=a(9434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-slate-950 focus-visible:ring-slate-950/50 focus-visible:ring-[3px] aria-invalid:ring-red-500/20 dark:aria-invalid:ring-red-500/40 aria-invalid:border-red-500 dark:focus-visible:border-slate-300 dark:focus-visible:ring-slate-300/50 dark:aria-invalid:ring-red-900/20 dark:dark:aria-invalid:ring-red-900/40 dark:aria-invalid:border-red-900",{variants:{variant:{default:"bg-slate-900 text-slate-50 shadow-xs hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-white shadow-xs hover:bg-red-500/90 focus-visible:ring-red-500/20 dark:focus-visible:ring-red-500/40 dark:bg-red-500/60 dark:bg-red-900 dark:hover:bg-red-900/90 dark:focus-visible:ring-red-900/20 dark:dark:focus-visible:ring-red-900/40 dark:dark:bg-red-900/60",outline:"border bg-white shadow-xs hover:bg-slate-100 hover:text-slate-900 dark:bg-slate-200/30 dark:border-slate-200 dark:hover:bg-slate-200/50 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50 dark:dark:bg-slate-800/30 dark:dark:border-slate-800 dark:dark:hover:bg-slate-800/50",secondary:"bg-slate-100 text-slate-900 shadow-xs hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-100/50 dark:hover:bg-slate-800 dark:hover:text-slate-50 dark:dark:hover:bg-slate-800/50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:n,asChild:o=!1,...d}=e,c=o?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:n,className:t})),...d})}},1227:(e,t,a)=>{"use strict";a.d(t,{J:()=>l,UserProvider:()=>i});var r=a(5155),s=a(2115);let n=(0,s.createContext)(null),i=e=>{let{children:t}=e,[a,i]=(0,s.useState)(null);return(0,r.jsx)(n.Provider,{value:{user:a,setUser:i},children:t})},l=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useUser must be used within a UserProvider");return e}},2217:(e,t,a)=>{"use strict";a.d(t,{QO:()=>r,Ri:()=>s,TV:()=>n,Yj:()=>i});let r="auth",s=e=>{let t=document.cookie.match(new RegExp("(^| )".concat(e,"=([^;]+)")));if(t)return t[2]},n=(e,t,a)=>{document.cookie="".concat(e,"=").concat(t,"; path=/; ").concat(a?"domain=".concat(a,";"):""," samesite=strict;")},i=(e,t)=>{document.cookie="".concat(e,"=; path=/; ").concat(t?"domain=".concat(t,";"):""," expires=Thu, 01 Jan 1970 00:00:01 GMT;")}},2380:(e,t,a)=>{"use strict";a.d(t,{s:()=>r});let r=(0,a(5453).v)(e=>({loadingCount:0,start:()=>e(e=>({loadingCount:e.loadingCount+1})),stop:()=>e(e=>({loadingCount:Math.max(0,e.loadingCount-1)}))}))},6033:(e,t,a)=>{Promise.resolve().then(a.bind(a,6862))},6862:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var r=a(5155),s=a(6203),n=a(3915);let i=(0,n.Dk)().length?(0,n.Dk)()[0]:(0,n.Wp)({apiKey:"AIzaSyDU1iQPfg35J7Gf0zpiQdNdRHNXrNgh034",authDomain:"cv-project-g.firebaseapp.com",projectId:"cv-project-g",storageBucket:"cv-project-g.firebasestorage.app",messagingSenderId:"737874001876",appId:"1:737874001876:web:f8110facdf19be32d7e041",measurementId:"G-0KFR92N7HG"}),l=(0,s.xI)(i);var o=a(1227),d=a(2217),c=a(8326),u=a(470);let h=()=>{let{setUser:e}=(0,o.J)(),t=async()=>{let t=new s.HF;try{let r=(await (0,s.df)(l,t)).user,n=await r.getIdToken(),i={id:"",uid:r.uid,displayName:r.displayName,email:r.email,photoURL:r.photoURL,token:n};(0,d.TV)(d.QO,JSON.stringify(i),window.location.hostname);let o=await (0,c.Cf)(i.uid);if(o.data.length){var a;e({...i,id:null!==(a=o.data[0]._id)&&void 0!==a?a:""})}else{let t=await (0,c.WU)(i);e({...i,id:t.data._id})}}catch(e){console.error("Login error:",e)}};return(0,r.jsx)(u.Ay,{onClick:t})};var v=a(285),g=a(6766),p=a(5695),x=a(2115),m=a(7649),f=a(9434);function b(e){let{...t}=e;return(0,r.jsx)(m.bL,{"data-slot":"alert-dialog",...t})}function k(e){let{...t}=e;return(0,r.jsx)(m.ZL,{"data-slot":"alert-dialog-portal",...t})}function j(e){let{className:t,...a}=e;return(0,r.jsx)(m.hJ,{"data-slot":"alert-dialog-overlay",className:(0,f.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function w(e){let{className:t,...a}=e;return(0,r.jsxs)(k,{children:[(0,r.jsx)(j,{}),(0,r.jsx)(m.UC,{"data-slot":"alert-dialog-content",className:(0,f.cn)("dialog bg-white data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border border-neutral-200 p-6 shadow-lg duration-200 sm:max-w-lg dark:bg-neutral-950 dark:border-neutral-800",t),...a})]})}function y(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,f.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function C(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,f.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function N(e){let{className:t,...a}=e;return(0,r.jsx)(m.hE,{"data-slot":"alert-dialog-title",className:(0,f.cn)("text-lg font-semibold",t),...a})}function A(e){let{className:t,...a}=e;return(0,r.jsx)(m.VY,{"data-slot":"alert-dialog-description",className:(0,f.cn)("text-neutral-500 text-sm dark:text-neutral-400",t),...a})}function _(e){let{className:t,...a}=e;return(0,r.jsx)(m.ZD,{className:(0,f.cn)((0,v.r)({variant:"outline"}),t),...a})}function R(e){let{onContinue:t,onClose:a,open:s,onOpenChange:n}=e;return(0,r.jsx)(b,{open:s,onOpenChange:n,children:(0,r.jsxs)(w,{children:[(0,r.jsxs)(y,{children:[(0,r.jsx)(N,{children:"Are you absolutely sure?"}),(0,r.jsx)(A,{children:"This action cannot be undone."})]}),(0,r.jsxs)(C,{children:[(0,r.jsx)(_,{asChild:!0,children:(0,r.jsx)(v.$,{variant:"outline",onClick:a,children:"Cancel"})}),(0,r.jsx)(v.$,{variant:"outline",onClick:t,children:"Continue"})]})]})})}var z=a(6671);let V=()=>{let{user:e}=(0,o.J)(),t=(0,p.useRouter)(),[a,s]=(0,x.useState)([]),[n,i]=(0,x.useState)(null),[l,d]=(0,x.useState)(!1),[u,h]=(0,x.useState)(0),m=e=>{t.push("/cv-form/edit/".concat(e._id))},f=e=>{i(e),d(!0)},b=e=>{t.push("/cv-form/view/".concat(e._id,"?controls=true"))},k=async()=>{d(!1);try{var e;await (0,c.wq)(null!==(e=null==n?void 0:n._id)&&void 0!==e?e:""),(0,z.oR)("CV has been deleted successfully")}catch(e){(0,z.oR)("Error ocurred")}h(e=>e+1)};return(0,x.useEffect)(()=>{e&&(async()=>{try{let t=await (0,c.Mu)(e);s(t.data)}catch(e){console.error("Error fetching CV list:",e)}})()},[e,u]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"user-page",children:[(0,r.jsxs)("div",{className:"flex items-center intro",children:[(0,r.jsx)("div",{className:"image",children:(0,r.jsx)(g.default,{src:(null==e?void 0:e.photoURL)||"/images/avatar.png",alt:"Photo",width:150,height:150,priority:!0,className:"rounded-full"})}),(0,r.jsx)("div",{className:"user",children:(null==e?void 0:e.displayName)&&(0,r.jsx)("h1",{className:"text-2xl font-bold user-name",children:e.displayName})})]}),(0,r.jsx)(v.$,{variant:"outline",onClick:()=>{t.push("/cv-form/create")},children:"Create CV"}),0!==a.length&&a.map(e=>(0,r.jsx)("div",{className:"cv-list",children:(0,r.jsxs)("div",{className:"cv-item flex flex-row",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsx)(v.$,{variant:"outline",onClick:()=>m(e),children:"Edit CV"}),(0,r.jsx)(v.$,{variant:"outline",onClick:()=>b(e),children:"View CV"}),(0,r.jsx)(v.$,{variant:"outline",onClick:()=>f(e),children:"Remove CV"}),(0,r.jsx)(R,{open:l,onOpenChange:d,onContinue:k})]})},e.id))]})})};function E(){let{user:e}=(0,o.J)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"flex main-container",children:e?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(V,{})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h,{})})})})}},6903:(e,t,a)=>{"use strict";let r;a.d(t,{A:()=>d,Y:()=>l});var s=a(3464),n=a(2217);let i="https://goodpesyk-api-cv-project.duckdns.org",l="".concat(i),o=s.A.create({baseURL:i});r=a(2380).s,o.interceptors.request.use(e=>(r&&r.getState().start(),e)),o.interceptors.response.use(e=>(r&&r.getState().stop(),e),e=>(r&&r.getState().stop(),Promise.reject(e))),o.interceptors.request.use(e=>{var t;let a=null===(t=JSON.parse((0,n.Ri)(n.QO)||"{}"))||void 0===t?void 0:t.token;return a&&(e.headers.Authorization="Bearer ".concat(a)),e.isKey&&(e.headers.Authorization="c61a0c6d-1448-4302-b216-e00f980b7f23"),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var t;let a=null===(t=e.response)||void 0===t?void 0:t.status;return(403===a||401===a)&&(e.isAuthError=!0),Promise.reject(e)});let d=o},8326:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>s,GR:()=>i,LI:()=>l,Mu:()=>d,VV:()=>h,WU:()=>n,_2:()=>c,gN:()=>u,wq:()=>o});var r=a(6903);let s=e=>r.A.get("/users/".concat(e)),n=e=>{let t={id:e.uid,name:e.displayName||""};return r.A.post("/users",t)},i=e=>r.A.post("/cv-data",e),l=(e,t)=>r.A.put("/cv-data/".concat(e),t),o=e=>r.A.delete("/cv-data/".concat(e)),d=e=>r.A.get("/cv-data/all/".concat(e.id)),c=(e,t)=>r.A.get("/cv-data/".concat(e),{isKey:t}),u=(e,t,a)=>{let s=new FormData;return s.append("file",e),r.A.post("/cv-data/photo?isEdit=".concat(t,"&cvId=").concat(""===a?"empty":a),s,{headers:{"Content-Type":"multipart/form-data"}})},h=e=>r.A.post("/pdf/generate?url=".concat(e),null,{responseType:"blob"}).then(e=>e.data)},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[888,546,971,671,237,189,441,684,358],()=>t(6033)),_N_E=e.O()}]);